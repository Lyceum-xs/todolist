{"openapi":"3.1.0","info":{"title":"待办事项后端","description":"一个简洁的 Todo-List API，用于演示 FastAPI + SQLAlchemy 的中文化接口。","version":"0.1.0"},"paths":{"/tasks":{"post":{"tags":["任务"],"summary":"创建任务","operationId":"create_task_tasks_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["任务"],"summary":"任务列表","operationId":"list_tasks_tasks_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"completed | pending | all","title":"Status"},"description":"completed | pending | all"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TaskOut"},"title":"Response List Tasks Tasks Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tasks/{task_id}":{"get":{"tags":["任务"],"summary":"获取任务","operationId":"get_task_tasks__task_id__get","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["任务"],"summary":"更新任务","operationId":"update_task_tasks__task_id__patch","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["任务"],"summary":"删除任务","operationId":"delete_task_tasks__task_id__delete","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tasks/search":{"get":{"tags":["任务"],"summary":"搜索任务","operationId":"search_tasks_tasks_search_get","parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":1,"title":"Q"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TaskOut"},"title":"Response Search Tasks Tasks Search Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tasks/{task_id}/children_count":{"get":{"tags":["任务"],"summary":"获取孩子数量","operationId":"get_children_count_tasks__task_id__children_count_get","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tasks/{task_id}/subtree":{"get":{"tags":["任务"],"summary":"任务子树","operationId":"get_subtree_tasks__task_id__subtree_get","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}},{"name":"mode","in":"query","required":false,"schema":{"type":"string","pattern":"^(bfs|dfs)$","description":"遍历方式 bfs | dfs","default":"bfs","title":"Mode"},"description":"遍历方式 bfs | dfs"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TaskOut"},"title":"Response Get Subtree Tasks  Task Id  Subtree Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/habits":{"get":{"tags":["习惯"],"summary":"习惯列表","operationId":"list_habits_habits_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/HabitOut"},"type":"array","title":"Response List Habits Habits Get"}}}}}},"post":{"tags":["习惯"],"summary":"创建习惯","operationId":"create_habit_habits_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HabitCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HabitOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/habits/{habit_id}/log":{"post":{"tags":["习惯"],"summary":"打卡","operationId":"check_in_habits__habit_id__log_post","parameters":[{"name":"habit_id","in":"path","required":true,"schema":{"type":"integer","title":"Habit Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HabitLogCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pomodoros/":{"get":{"tags":["番茄钟"],"summary":"番茄钟列表","operationId":"list_pomodoros_pomodoros__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/PomodoroOut"},"type":"array","title":"Response List Pomodoros Pomodoros  Get"}}}}}},"post":{"tags":["番茄钟"],"summary":"开始番茄钟","operationId":"start_pomodoro_pomodoros__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PomodoroStart"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PomodoroOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/pomodoros/{session_id}/stop":{"patch":{"tags":["番茄钟"],"summary":"结束番茄钟","operationId":"stop_pomodoro_pomodoros__session_id__stop_patch","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"integer","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PomodoroOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HabitCreate":{"properties":{"name":{"type":"string","maxLength":128,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"duration":{"type":"integer","title":"Duration","default":0}},"type":"object","required":["name"],"title":"习惯创建"},"HabitLogCreate":{"properties":{"date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Date"}},"type":"object","title":"HabitLogCreate"},"HabitLogOut":{"properties":{"id":{"type":"integer","title":"Id"},"date":{"type":"string","format":"date-time","title":"Date"}},"type":"object","required":["id","date"],"title":"打卡日志详情"},"HabitOut":{"properties":{"name":{"type":"string","maxLength":128,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"duration":{"type":"integer","title":"Duration","default":0},"id":{"type":"integer","title":"Id"},"logs":{"items":{"$ref":"#/components/schemas/HabitLogOut"},"type":"array","title":"Logs","default":[]}},"type":"object","required":["name","id"],"title":"习惯详情"},"PomodoroOut":{"properties":{"id":{"type":"integer","title":"Id"},"start_at":{"type":"string","format":"date-time","title":"Start At"},"end_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End At"},"work_minutes":{"type":"integer","title":"Work Minutes"},"break_minutes":{"type":"integer","title":"Break Minutes"},"planned_seconds":{"type":"integer","title":"Planned Seconds"},"actual_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Actual Seconds"},"completed":{"type":"boolean","title":"Completed"}},"type":"object","required":["id","start_at","end_at","work_minutes","break_minutes","planned_seconds","actual_seconds","completed"],"title":"番茄钟详情","description":"番茄钟详情"},"PomodoroStart":{"properties":{"work_minutes":{"type":"integer","maximum":120.0,"minimum":5.0,"title":"专注时长（分钟）","default":25},"break_minutes":{"type":"integer","maximum":60.0,"minimum":1.0,"title":"休息时长（分钟）","default":5}},"type":"object","title":"番茄钟启动","description":"番茄钟启动"},"TaskCreate":{"properties":{"name":{"type":"string","maxLength":255,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"due_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Due Date"},"importance":{"type":"boolean","title":"Importance","default":false},"urgent":{"type":"boolean","title":"Urgent","default":false},"parent_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Parent Id"}},"type":"object","required":["name"],"title":"任务创建"},"TaskOut":{"properties":{"name":{"type":"string","maxLength":255,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"due_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Due Date"},"importance":{"type":"boolean","title":"Importance","default":false},"urgent":{"type":"boolean","title":"Urgent","default":false},"parent_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Parent Id"},"id":{"type":"integer","title":"Id"},"completed":{"type":"boolean","title":"Completed"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["name","id","completed","created_at","updated_at"],"title":"任务详情"},"TaskUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"due_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Due Date"},"completed":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Completed","default":false},"importance":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Importance","default":false},"urgent":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Urgent","default":false}},"type":"object","title":"任务更新"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}},"tags":[{"name":"任务","description":"任务相关接口（创建 / 查询 / 更新 / 删除 / 搜索）"}]}